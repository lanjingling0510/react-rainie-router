!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.reactRainieRouter=e(t.React)}(this,function(t){"use strict";function e(t,e){var n=arguments.length<=2||void 0===arguments[2]?v:arguments[2],r=/(?:\?([^#]*))?(#.*)?$/,i=t.match(r),u={},a=void 0;if(i&&i[1])for(var p=i[1].split("&"),c=0;c<p.length;c++){var f=p[c].split("=");u[decodeURIComponent(f[0])]=decodeURIComponent(f.slice(1).join("="))}t=o(t.replace(r,"")),e=o(e||"");for(var s=Math.max(t.length,e.length),l=0;l<s;l++)if(e[l]&&":"===e[l].charAt(0)){var h=e[l].replace(/(^\:|[+*?]+$)/g,""),d=(e[l].match(/[+*?]+$/)||v)[0]||"",m=~d.indexOf("+"),y=~d.indexOf("*"),g=t[l]||"";if(!g&&!y&&(d.indexOf("?")<0||m)){a=!1;break}if(u[h]=decodeURIComponent(g),m||y){u[h]=t.slice(l).map(decodeURIComponent).join("/");break}}else if(e[l]!==t[l]){a=!1;break}return(n.default===!0||a!==!1)&&u}function n(t,e){var n=t.props||v,o=e.props||v;if(n.default)return 1;if(o.default)return-1;var i=r(n.path)-r(o.path);return i||n.path.length-o.path.length}function o(t){return i(t).split("/")}function r(t){return(i(t).match(/\/+/g)||"").length}function i(t){return t.replace(/(^\/+|\/+$)/g,"")}function u(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function a(t){var e=arguments.length<=1||void 0===arguments[1]?"push":arguments[1];P&&P[e]?P[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}function p(){var t=void 0;return t=P&&P.getCurrentLocation?P.getCurrentLocation():"undefined"!=typeof location?location:E,""+(t.pathname||"")+(t.search||"")}function c(t){w.push(t)}function f(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return Promise.all(w.map(function(e){return e(t)})).then(function(){return"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),a(t,e?"replace":"push"),s(t)}).catch(function(){})}function s(t){var e=!1;return j.forEach(function(n){n.routeTo(t)===!0&&(e=!0)}),e}function l(t){if(t&&t.getAttribute){var e=t.getAttribute("href")||t.getAttribute("to"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return f(e)}}function h(t){return function(e){return d(e,t)}}function d(t,e){var n=t.currentTarget||t.target||this;if(0===t.button)return"number"==typeof e?(t.persist(),setTimeout(function(){return l(n)},e),m(t)):(l(n),m(t))}function m(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}t="default"in t?t.default:t;var v={},y=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},C=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},O=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},R=function(e){function n(){var t,o,r;y(this,n);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return t=o=O(this,e.call.apply(e,[this].concat(u))),o.state={SplitComponent:void 0},r=t,O(o,r)}return b(n,e),n.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.component,o=e.getComponent;if(!n&&o){var r=o();u(r)&&r.then(function(e){t.setState({SplitComponent:e})})}},n.prototype.render=function(){var e=this.props,n=e.component,o=(e.getComponent,C(e,["component","getComponent"])),r=this.state.SplitComponent;return n?t.createElement(n,o):r?t.createElement(r,o):null},n}(t.Component);R.PropTypes={component:t.PropTypes.node,getComponent:t.PropTypes.func};var P=null,j=[],E={},w=[];"function"==typeof addEventListener&&addEventListener("popstate",function(){return s(p())});var x=function(o){function r(t){y(this,r);var e=O(this,o.call(this,t));return t.history&&(P=t.history),e.state={url:e.props.url||p()},e}return b(r,o),r.prototype.shouldComponentUpdate=function(t,e){return t.url!==this.props.url||t.onChange!==this.props.onChange||e.url!==this.state.url},r.prototype.componentWillMount=function(){j.push(this)},r.prototype.componentWillUnmount=function(){j.splice(j.indexOf(this),1)},r.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this._didRoute},r.prototype.render=function(){for(var o=this.props,r=o.children,i=o.onChange,u=this.state.url,a=null,p=t.Children.toArray(r).sort(n),c=0;c<p.length;c++){var f=p[c],s=f.props,l=s.path,h=e(u,l,s);if(h){a=t.cloneElement(f,g({},f.props,{url:u,matches:h})),this._didRoute=!0;break}}var d=this.previousUrl;return u!==d&&(this.previousUrl=u,"function"==typeof i&&i({url:u,previous:d,router:this})),a},r}(t.Component),T=function(n){var o=n.children,r=n.activeClassName,i=n.delay,u=C(n,["children","activeClassName","delay"]);return t.createElement("a",g({},u,{className:e(u.href||u.to,p())?r+" "+u.className:u.className,onClick:h(i)}),o)};return x.listenBefore=c,x.route=f,x.Router=x,x.Route=R,x.Link=T,x});
//# sourceMappingURL=react-rainie-router.min.js.map